import{c as y,u as b,a as x,b as w,h as k,d as C,_ as L,r,e as p,f as R,w as o,o as u,g as n,i as l,j as f,k as g,l as V,Q as _,m as Q}from"./index.6a412139.js";import{Q as B,g as S,a as h,b as v}from"./dataBase.63a7565a.js";import{u as A}from"./store.8c0d68ba.js";var D=y({name:"QCardActions",props:{...b,vertical:Boolean},setup(d,{slots:t}){const a=x(d),e=w(()=>`q-card__actions ${a.value} q-card__actions--${d.vertical===!0?"vert column":"horiz row"}`);return()=>k("div",{class:e.value},C(t.default))}});const N={name:"Login",setup(d){const t=A(),a=r(null),e=r(null),c=r(null),m=r(null),s=r(!1);return{result_email:a,result_emailRef:e,result_emailRules:[i=>i&&i.length>0||"Please type something"],result_password:c,result_passwordRef:m,result_passwordRules:[i=>i&&i.length>0||"Please type something"],sendData:async()=>{s.value=!0,e.value.validate(),m.value.validate();const i=await S.post("/login",{email:a.value,password:c.value});if(i.user)return localStorage.setItem("token",i.data.token),t.token=i.data.token,s.value=!1,p.push("/")},redirectRegister:()=>p.push("/register"),initLogin:s,router:p}}},P=l("div",{class:"descriptionLogin"},[l("h1",null,"Log In"),l("p",null,"Login here using your email and password")],-1),I={key:0,class:"animationContent"},j=l("div",{class:"lds-ellipsis"},[l("div"),l("div"),l("div"),l("div")],-1),q=Q("Register"),z={key:0},E={key:1};function F(d,t,a,e,c,m){return u(),R(B,{class:"bodyLogin"},{default:o(()=>[P,n(v,{class:"bodyForm"},{default:o(()=>[l("form",{onSubmit:t[2]||(t[2]=V((...s)=>e.sendData&&e.sendData(...s),["prevent","stop"])),class:"inputContent"},[e.initLogin?(u(),f("div",I,[n(D,null,{default:o(()=>[j]),_:1})])):g("",!0),n(h,{ref:"result_emailRef",style:{margin:"10px 0"},"bg-color":"white",outlined:"",label:"Email",modelValue:e.result_email,"onUpdate:modelValue":t[0]||(t[0]=s=>e.result_email=s),rules:e.result_emailRules},null,8,["modelValue","rules"]),n(h,{ref:"result_passwordRef",style:{margin:"10px 0"},type:"password","bg-color":"white",outlined:"",label:"Password",modelValue:e.result_password,"onUpdate:modelValue":t[1]||(t[1]=s=>e.result_password=s),rules:e.result_passwordRules},null,8,["modelValue","rules"])],32),n(v,{class:"buttonContent"},{default:o(()=>[n(_,{onClick:e.redirectRegister},{default:o(()=>[q]),_:1},8,["onClick"]),n(_,{type:"submit",color:"primary"},{default:o(()=>[e.initLogin?g("",!0):(u(),f("span",z,"Login")),e.initLogin?(u(),f("span",E,"Loading...")):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}var H=L(N,[["render",F]]);export{H as default};
