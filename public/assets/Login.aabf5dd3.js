import{c as L,u as V,a as C,b as P,h as Q,d as B,_ as E,r as l,e as g,f as S,w as d,o as m,g as o,i as t,j as v,k as h,Q as y,l as A,m as N}from"./index.5def6083.js";import{Q as R,g as D,a as w,b as k}from"./dataBase.07b5c561.js";import{u as I}from"./store.de0de2ab.js";var j=L({name:"QCardActions",props:{...V,vertical:Boolean},setup(c,{slots:s}){const n=C(c),e=P(()=>`q-card__actions ${n.value} q-card__actions--${c.vertical===!0?"vert column":"horiz row"}`);return()=>Q("div",{class:e.value},B(s.default))}});const q={name:"Login",setup(c){const s=I(),n=l(null),e=l(null),r=l(!1),u=l(!1),a=l(null),p=l(!1),f=l(null);return{result_email:n,result_password:e,sendData:async()=>{var _,b,x;r.value=!0,(!n.value||!e.value)&&(r.value=!1,p.value=!0,f.value="Please enter all fields",u.value=!0,a.value="Please enter all fields");const i=await D.post("/login",{email:n.value,password:e.value});if((_=i==null?void 0:i.data)!=null&&_.msg2&&(r.value=!1,u.value=!0,a.value=i.data.msg2),(b=i==null?void 0:i.data)!=null&&b.msg1&&(r.value=!1,p.value=!0,f.value=i.data.msg1),(x=i==null?void 0:i.data)!=null&&x.user)return localStorage.setItem("token",i.data.token),s.token=i.data.token,g.push("/")},redirectRegister:()=>g.push("/register"),initLogin:r,router:g,isValidPassword:u,errorPassword:a,errorEmail:f,isValidEmail:p}}},z=t("div",{class:"descriptionLogin"},[t("h1",null,"Log In"),t("p",null,"Login here using your email and password")],-1),F={key:0,class:"animationContent"},U=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),M=N("Register"),O={key:0},T={key:1};function G(c,s,n,e,r,u){return m(),S(R,{class:"bodyLogin"},{default:d(()=>[z,o(k,{class:"bodyForm"},{default:d(()=>[t("form",{onSubmit:s[2]||(s[2]=A(a=>e.sendData(),["prevent","stop"])),class:"inputContent"},[e.initLogin?(m(),v("div",F,[o(j,null,{default:d(()=>[U]),_:1})])):h("",!0),o(w,{style:{margin:"10px 0"},"bg-color":"white",outlined:"",label:"Email",modelValue:e.result_email,"onUpdate:modelValue":s[0]||(s[0]=a=>e.result_email=a),"error-message":e.errorEmail,error:e.isValidEmail},null,8,["modelValue","error-message","error"]),o(w,{style:{margin:"10px 0"},type:"password","bg-color":"white",outlined:"",label:"Password",modelValue:e.result_password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.result_password=a),"error-message":e.errorPassword,error:e.isValidPassword},null,8,["modelValue","error-message","error"]),o(k,{class:"buttonContent"},{default:d(()=>[o(y,{onClick:e.redirectRegister},{default:d(()=>[M]),_:1},8,["onClick"]),o(y,{type:"submit",color:"primary"},{default:d(()=>[e.initLogin?h("",!0):(m(),v("span",O,"Login")),e.initLogin?(m(),v("span",T,"Loading...")):h("",!0)]),_:1})]),_:1})],32)]),_:1})]),_:1})}var Y=E(q,[["render",G]]);export{Y as default};
