import{u as w,m as H,a as $}from"./store.23c34caf.js";import{Q as V,b as R,a as S}from"./dataBase.2f590b79.js";import{_ as I,r as b,G as k,o as i,f as x,w as g,j as l,i as n,R as h,g as u,J as j,Q as L,k as y,n as A,S as v,U as F,V as C,W as B,m as N,X as Q,Y as q}from"./index.61cf5365.js";import{R as z,L as U,M as G}from"./ModalsResquet.f8d97e1e.js";const T={props:["data"],setup(o){const s=b(""),t=w(),e=b(null);return k(async()=>{var d;s.value=o.data,await t.myUser(),e.value=await((d=t.myID)==null?void 0:d.direction[0])}),{use:t,user:s,clickInfoFriend:async d=>{var c;t.viewInfoFriend=d;const a=d.direction[0],r=[[e.value.lng,e.value.lat],[a.lng,a.lat]];await t.directionInit(e.value,d.direction[0]),t.addSourceData(t.coodinatesSource.routes[0].geometry.coordinates),(c=t.mapHome)!=null&&c.getLayer("route")&&(t.mapHome.removeLayer("route"),t.mapHome.removeSource("route")),t.newMarker.setLngLat([a.lng,a.lat]).addTo(t.mapHome),t.mapHome.fitBounds(r,{padding:40}),t.mapHome.addSource("route",t.sourceData),t.mapHome.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":3}})}}}},E={key:0,class:"descriptContent"},J={class:"nameContent"},P={class:"btnContent"};function X(o,s,t,e,m,d){return i(),x(R,{class:"resultFriends"},{default:g(()=>[e.user?(i(),x(V,{key:0,class:"bodyResult"},{default:g(()=>{var a,r;return[e.use.myID.uid!==e.user.uid?(i(),l("div",E,[n("div",J,[n("h3",null,h(e.user.name),1),n("p",null,h((a=e.user.direction[0])==null?void 0:a.lng)+" __ "+h((r=e.user.direction[0])==null?void 0:r.lat),1)]),n("div",P,[u(L,{style:{width:"4rem",height:"2.5rem"},onClick:s[0]||(s[0]=c=>e.clickInfoFriend(e.user))},{default:g(()=>[u(j,{name:"share_location",size:"2.2rem"})]),_:1})])])):y("",!0)]}),_:1})):y("",!0)]),_:1})}var Y=I(T,[["render",X]]);const Z={setup(){const o=w(),s=b(""),t=b(o.myID);return A(s,async()=>{await o.getAllAvailableUsers(s.value)}),{use:o,search:s,ViewMyID:t}},components:{CardFriends:Y}},K={class:"inputContent"},O={class:"homeFriends"},W={key:0,class:"titleContent"},ee=n("h4",null,"Amigos",-1),te={key:1,class:"titleContent"},ne=n("h4",null,"Publico",-1);function oe(o,s,t,e,m,d){var r,c,p,f;const a=v("CardFriends");return i(),l(F,null,[n("div",K,[u(S,{outlined:"",label:"Search Friends",modelValue:e.search,"onUpdate:modelValue":s[0]||(s[0]=_=>e.search=_)},null,8,["modelValue"])]),n("div",O,[(c=(r=e.use.usersAvaible)==null?void 0:r.dataFriends)!=null&&c.length?(i(),l("div",W,[ee,(i(!0),l(F,null,C(e.use.usersAvaible.dataFriends,_=>(i(),x(a,{key:_.uid,data:_},null,8,["data"]))),128))])):y("",!0),(f=(p=e.use.usersAvaible)==null?void 0:p.dataPublic)!=null&&f.length?(i(),l("div",te,[ne,(i(!0),l(F,null,C(e.use.usersAvaible.dataPublic,_=>(i(),x(a,{key:_.uid,data:_},null,8,["data"]))),128))])):y("",!0)])],64)}var M=I(Z,[["render",oe]]);const se={setup(){const o=w();k(async()=>{var m,d,a;await o.myUser(),(d=(m=o.myID)==null?void 0:m.direction[0])!=null&&d.lng||await o.registerDirection([{lng:0,lat:0}]);const{lng:s,lat:t}=await((a=o.myID)==null?void 0:a.direction[0]);H.accessToken="pk.eyJ1Ijoib3NjYXIxMjAwMiIsImEiOiJjbDU0MG4xdDIwNGw3M2txb3dwMXNsbzlvIn0.RG43TtKxZYSMZHBgEtuVRg";const e=new $.exports.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:s?[s,t]:[0,0],zoom:15,projection:"globe"});o.mapHome=e,e.on("load",()=>{new $.exports.Marker({color:"#6f0",anchor:"center"}).setLngLat([s,t]).addTo(e)})})}},ae={id:"map"};function ie(o,s,t,e,m,d){return i(),l("div",ae)}var de=I(se,[["render",ie]]),re="/assets/luffy.c9c4f7e2.jpg";const ce={setup(){return{use:w()}}},D=o=>(Q("data-v-4f719120"),o=o(),q(),o),le={class:"FriendInfo"},_e={class:"bodyFriendInfo"},ue={class:"contentAvatar"},me=D(()=>n("img",{src:re,alt:""},null,-1)),pe={class:"FriendInfoDescription"},fe={class:"friendName"},ve={class:"friendDirection"},he=D(()=>n("b",null,"Direccion : ",-1));function ye(o,s,t,e,m,d){var a,r,c,p,f;return i(),l("div",le,[n("div",_e,[n("div",ue,[u(B,{size:"5.8rem"},{default:g(()=>[me]),_:1})]),n("div",pe,[n("div",fe,[n("h3",null,h((a=e.use.viewInfoFriend)==null?void 0:a.name),1)]),n("div",ve,[n("p",null,[he,N(h((c=(r=e.use.viewInfoFriend)==null?void 0:r.direction[0])==null?void 0:c.lng)+" - "+h((f=(p=e.use.viewInfoFriend)==null?void 0:p.direction[0])==null?void 0:f.lat),1)])])])])])}var ge=I(ce,[["render",ye],["__scopeId","data-v-4f719120"]]);const xe={name:"Home",components:{FriendsView:M,MapBody:de,RequestFriends:z,Layout:U,FriendsView:M,ModalsResquet:G,FriendInfo:ge},setup(){return{use:w()}}},we={class:"home"},Ie={key:0,class:"modalItem"},be={key:1,class:"modalItem"},Fe={class:"bodyHome"},$e={class:"contentFriends"},Ce={class:"bodyMap"},Me={class:"contentInfo"},ke={class:"contentMap"};function De(o,s,t,e,m,d){const a=v("ModalsResquet"),r=v("RequestFriends"),c=v("FriendsView"),p=v("FriendInfo"),f=v("MapBody"),_=v("Layout");return i(),x(_,null,{content:g(()=>[n("div",we,[e.use.modal?(i(),l("div",Ie,[u(a)])):y("",!0),e.use.modalRequest?(i(),l("div",be,[u(r)])):y("",!0),n("div",Fe,[n("div",$e,[u(c)]),n("div",Ce,[n("div",Me,[u(p)]),n("div",ke,[u(f)])])])])]),_:1})}var je=I(xe,[["render",De],["__scopeId","data-v-4ce00284"]]);export{je as default};
