import{c as y,u as b,a as x,b as w,h as k,d as C,_ as L,r,e as m,f as R,w as o,o as u,g as n,i,j as f,k as g,Q as _,l as V,m as Q}from"./index.57a24bbd.js";import{Q as B,g as S,a as h,b as v}from"./dataBase.57489937.js";import{u as A}from"./store.6f51449e.js";var N=y({name:"QCardActions",props:{...b,vertical:Boolean},setup(d,{slots:s}){const a=x(d),e=w(()=>`q-card__actions ${a.value} q-card__actions--${d.vertical===!0?"vert column":"horiz row"}`);return()=>k("div",{class:e.value},C(s.default))}});const P={name:"Login",setup(d){const s=A(),a=r(null),e=r(null),c=r(null),p=r(null),l=r(!1);return{result_email:a,result_emailRef:e,result_emailRules:[t=>t&&t.length>0||"Please type something"],result_password:c,result_passwordRef:p,result_passwordRules:[t=>t&&t.length>0||"Please type something"],sendData:async()=>{l.value=!0,e.value.validate(),p.value.validate();const t=await S.post("/login",{email:a.value,password:c.value});if(t!=null&&t.user)return localStorage.setItem("token",t.data.token),s.token=t.data.token,l.value=!1,m.push("/")},redirectRegister:()=>m.push("/register"),initLogin:l,router:m}}},D=i("div",{class:"descriptionLogin"},[i("h1",null,"Log In"),i("p",null,"Login here using your email and password")],-1),I={key:0,class:"animationContent"},j=i("div",{class:"lds-ellipsis"},[i("div"),i("div"),i("div"),i("div")],-1),q=Q("Register"),z={key:0},E={key:1};function F(d,s,a,e,c,p){return u(),R(B,{class:"bodyLogin"},{default:o(()=>[D,n(v,{class:"bodyForm"},{default:o(()=>[i("form",{onSubmit:s[2]||(s[2]=V(l=>e.sendData(),["prevent","stop"])),class:"inputContent"},[e.initLogin?(u(),f("div",I,[n(N,null,{default:o(()=>[j]),_:1})])):g("",!0),n(h,{ref:"result_emailRef",style:{margin:"10px 0"},"bg-color":"white",outlined:"",label:"Email",modelValue:e.result_email,"onUpdate:modelValue":s[0]||(s[0]=l=>e.result_email=l),rules:e.result_emailRules},null,8,["modelValue","rules"]),n(h,{ref:"result_passwordRef",style:{margin:"10px 0"},type:"password","bg-color":"white",outlined:"",label:"Password",modelValue:e.result_password,"onUpdate:modelValue":s[1]||(s[1]=l=>e.result_password=l),rules:e.result_passwordRules},null,8,["modelValue","rules"]),n(v,{class:"buttonContent"},{default:o(()=>[n(_,{onClick:e.redirectRegister},{default:o(()=>[q]),_:1},8,["onClick"]),n(_,{type:"submit",color:"primary"},{default:o(()=>[e.initLogin?g("",!0):(u(),f("span",z,"Login")),e.initLogin?(u(),f("span",E,"Loading...")):g("",!0)]),_:1})]),_:1})],32)]),_:1})]),_:1})}var H=L(P,[["render",F]]);export{H as default};
